<nav class="gtm__navigation__desktop l__wrapper l__row l__row--h-stretch l__hide--on-small-laptop {{ app.user ? 'b__nudge--top-5' : 'space--20-0' }}">
    <ul class="list__links list__links--row list__links--no-decor list__links--nav">
        {% if app.user %}
        <li>
            <h1><a href="{{ path('homepage') }}">EM!</a></h1>
        </li>
        {% endif %}
        {% if not app.user %}
            <li>
                <h1><a href="{{ path('homepage') }}">En Marche !</a></h1>
            </li>
            <li>
                <a href="{{ path('page_le_mouvement') }}">Le Mouvement</a>
            </li>
        {% endif %}
        <li>
            <a href="{{ path('app_search_events') }}">√âv√©nements</a>
        </li>
        <li>
            <a href="{{ path('app_search_events') }}">Projets citoyens</a>
        </li>
        <li>
            <a href="{{ path('page_campus') }}">Campus</a>
        </li>
        <li>
            <a href="{{ path('articles_list', {'category': 'tout'}) }}">Actualit√©s</a>
        </li>
        {% if app.user and not is_granted('ROLE_ADHERENT') %}
            <li>
                <a href="{{ path('app_membership_register') }}">Devenir adh√©rent(e)</a>
            </li>
        {% endif %}
        <li>
            <a href="{{ path('donation_index') }}">Donner</a>
        </li>
        <li {% if not algolia_app_id or not algolia_api_key %}style="display: none;"{% endif %}>
            <a href="javascript:void(0)" class="je-cherche">
                {{ include('components/search.html.twig') }}
            </a>
        </li>
    </ul>
    <div class="l__row">
        {% if not campaign_expired %}
            <div class="nav__user">
                {% if is_granted('ROLE_ADMIN_DASHBOARD') %}
                    <a href="{{ path('sonata_admin_dashboard') }}" class="icon--with-text text--medium-small nav__user__name">
                        ü§ì Admin
                    </a>
                {% else %}
                    {% if app.user %}
                        <a href="{{ is_granted('ROLE_ADHERENT') ? path('app_user_profile') }}" class="icon--with-text nav__user__name">
                            {{ include('components/user.html.twig') }}
                            {{ app.user.firstName }}
                        </a>
                    {% endif %}
                    {% if is_granted('ROLE_USER') %}
                        <div class="nav__user__caret">
                            <span class="nav__user__caret--outer"></span>
                            <span class="nav__user__caret--inner"></span>
                        </div>
                        <div class="nav__user__menu">
                            <ul class="nav__user__menu__account">
                                <li class="text--bold">{{ app.user }}</li>
                                <li class="text--small text--gray">
                                    {% if not is_granted('ROLE_ADHERENT') %}
                                        Non-adh√©rent(e)
                                    {% elseif is_granted('ROLE_REFERENT') %}
                                        {% if app.user.isFemale %}R√©f√©rente{% else %}R√©f√©rent{% endif %}
                                    {% elseif app.user.isHost %}
                                        {% if app.user.isFemale %}Animatrice{% else %}Animateur{% endif %}
                                    {% elseif is_granted('ROLE_ADHERENT') %}
                                        {% if app.user.isFemale %}Adh√©rente{% else %}Adh√©rent{% endif %}
                                    {% endif %}
                                </li>
                                <li class="nav__user__menu__separator"></li>
                                <li>
                                    {% set url = is_granted('ROLE_ADHERENT') ? path('app_user_profile') : path('app_user_login') %}
                                    <a href="{{ url }}">Profil</a>
                                </li>
                                <li>
                                    <a href="{{ path('app_adherent_events') }}">Mes activit√©s</a>
                                </li>
                                <li>
                                    <a href="{{ path('app_create_citizen_initiative') }}">Cr√©er une initiative</a>
                                </li>
                                {% if is_granted('CREATE_CITIZEN_PROJECT') %}
                                    <li>
                                        <a href="{{ path('app_adherent_create_citizen_project') }}">Cr√©er un projet citoyen</a>
                                    </li>
                                {% endif %}
                                {% if is_granted('ROLE_ADHERENT') and is_granted('CREATE_COMMITTEE') %}
                                    <li class="nav__user__menu__separator"></li>
                                    <li>
                                        <a href="{{ path('app_adherent_create_committee') }}">Cr√©er un comit√©</a>
                                    </li>
                                {% endif %}
                                {% if app.user and not is_granted('ROLE_ADHERENT') %}
                                    <li class="nav__user__menu__separator"></li>
                                    <li>
                                        <a href="{{ path('app_membership_register') }}">Devenir adh√©rent(e)</a>
                                    </li>
                                {% endif %}
                                <li class="nav__user__menu__separator"></li>
                                <li>
                                    {# @TODO change route name when PR will be merge #}
                                    <a class="text--gray" href="{{ path('homepage') }}">Notifications</a>
                                </li>
                                <li>
                                    {# @TODO change route name when PR will be merge #}
                                    <a class="text--gray" href="{{ path('homepage') }}">Param√®tres</a>
                                </li>
                                <li>
                                    <a class="text--gray" href="https://aide.en-marche.fr" target="_blank" rel="noopener noreferrer">Aide</a>
                                </li>
                                <li>
                                    <a class="text--gray" href="{{ path('app_adherent_logout') }}">D√©connexion</a>
                                </li>
                                {% if is_granted('ROLE_PREVIOUS_ADMIN') %}
                                    <li class="text--small">
                                        <a href="{{ path('app_admin_impersonation_exit') }}">
                                            Quitter l'impersonnification
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    {% endif %}
                    {% endif %}
                {% endif %}
            </div>
            {% if app.user %}
                <a class="btn" href="{{ path('app_adherent_create_citizen_project') }}">
                    Lancer mon projet
                </a>
            {% endif %}
            {% if (not app.user) %}
                <a href="{{ path('app_user_login') }}" class="link--no-decor b__nudge--right">Connexion</a>
                <a href="{{ path('app_membership_register') }}" class="btn">Inscription</a>
            {% endif %}
            {% if app.user %}
                {% if is_granted('ROLE_USER') and not is_granted('ROLE_ADHERENT') %}
                    <a class="btn" href="{{ path('app_create_citizen_initiative') }}">Cr√©er une initiative</a>
                {% endif %}
            {% endif %}
    </div>
</nav>
{% if app.user %}
<div class="background--darker space--20-0 l__hide--on-small-laptop">
    <ul class="l__wrapper list__links list__links--row list__links--row-left list__links--no-decor list__links--subnav nav__user__menu__items">
        {% if is_granted('ROLE_ADHERENT') %}
            <li>
                {{ adherent_committees }}
            </li>
            <li>
                {{ adherent_citizen_projects }}
            </li>
        {% endif %}
        {% if is_granted('ROLE_REFERENT') %}
            <li>
                <a href="{{ path('app_referent_users') }}">Espace r√©f√©rent</a>
            </li>
        {% endif %}
        {% if is_granted('ROLE_BOARD_MEMBER') %}
            <li>
                <a href="{{ path('app_board_member_home') }}">Espace membre du Conseil</a>
            </li>
        {% endif %}
        {% if is_granted('ROLE_COORDINATOR') %}
            <li>
                <a href="{{ path('app_coordinator_committees', { 's': constant('AppBundle\\Entity\\Committee::PENDING') }) }}">Espace coordinateur r√©gional</a>
            </li>
        {% endif %}
        {% if is_granted('ROLE_PROCURATION_MANAGER') %}
            <li>
                <a href="{{ path('app_procuration_manager_requests') }}">Espace responsable procuration</a>
            </li>
        {% endif %}
        {% if is_granted('ROLE_LEGISLATIVE_CANDIDATE') %}
            <li>
                <a href="{{ path('app_legislative_candidates_platform') }}" target="_blank">
                    Espace candidat aux l√©gislatives
                </a>
            </li>
        {% endif %}
        {% if app.user and (is_granted('ROLE_ADHERENT') or is_granted('ROLE_HOST')) %}
            <li>
                <a href="{{ path('app_documents_index') }}">Mes documents</a>
            </li>
        {% endif %}
    </ul>
</div>
{% endif %}
